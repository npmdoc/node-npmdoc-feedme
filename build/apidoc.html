<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/fent/feedme.js#readme"

    >feedme (v1.0.0)</a>
</h1>
<h4>RSS/Atom/JSON feed parser</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.feedme">module feedme</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feedme.feedme">
            function <span class="apidocSignatureSpan"></span>feedme
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feedme.jsonfeedparser">
            function <span class="apidocSignatureSpan">feedme.</span>jsonfeedparser
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feedme.toString">
            function <span class="apidocSignatureSpan">feedme.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feedme.xmlfeedparser">
            function <span class="apidocSignatureSpan">feedme.</span>xmlfeedparser
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.feedme.jsonfeedparser">module feedme.jsonfeedparser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feedme.jsonfeedparser.jsonfeedparser">
            function <span class="apidocSignatureSpan">feedme.</span>jsonfeedparser
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.feedme.toString">module feedme.toString</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feedme.toString.toString">
            function <span class="apidocSignatureSpan">feedme.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.feedme.xmlfeedparser">module feedme.xmlfeedparser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.feedme.xmlfeedparser.xmlfeedparser">
            function <span class="apidocSignatureSpan">feedme.</span>xmlfeedparser
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.feedme" id="apidoc.module.feedme">module feedme</a></h1>


    <h2>
        <a href="#apidoc.element.feedme.feedme" id="apidoc.element.feedme.feedme">
        function <span class="apidocSignatureSpan"></span>feedme
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">feedme = function (buffer) {
  var yoshi = new EventYoshi();
  var parser;

  // Make yoshi behave stream like.
  yoshi.writable = true;

  // First find out what type of feed this is.
  yoshi.write = function(data) {
    var str = data.toString();
    var startParsing = false;

    if (/^\s*&#x3c;/.test(str)) {
      startParsing = true;
      parser = XMLFeedParser(buffer);

    } else if (/^\s*[\{\[]/.test(str)) {
      startParsing = true;
      parser = JSONFeedParser(buffer);
      yoshi.emit(&#x27;type&#x27;, &#x27;json&#x27;);

    } else {
      yoshi.emit(&#x27;error&#x27;, new Error(&#x27;Not a correctly formatted feed&#x27;));
    }

    if (startParsing) {
      yoshi.add(parser);
      yoshi.proxy(&#x27;write&#x27;, &#x27;end&#x27;, &#x27;done&#x27;, &#x27;close&#x27;);
      parser.write(data);
    }

  };

  // In case `end()` is called right away.
  yoshi.end = function(data) {
    if (data &#x26;&#x26; data.length) {
      yoshi.write(data);
    } else {
      yoshi.emit(&#x27;end&#x27;);
    }
  };

  return yoshi;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.feedme.jsonfeedparser" id="apidoc.element.feedme.jsonfeedparser">
        function <span class="apidocSignatureSpan">feedme.</span>jsonfeedparser
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">jsonfeedparser = function (buffer) {
  var parser = clarinet.createStream();

  // First find the feed object.
  function findfeed(key) {
    if (key === &#x27;feed&#x27;) {
      parser.removeListener(&#x27;openobject&#x27;, findfeed);
      parser.removeListener(&#x27;key&#x27;, findfeed);
      parser.on(&#x27;value&#x27;, onvalue);
      parser.on(&#x27;openobject&#x27;, onopenobject);
      parser.on(&#x27;key&#x27;, onkey);
      parser.on(&#x27;closeobject&#x27;, oncloseobject);
      parser.on(&#x27;openarray&#x27;, onopenarray);
      parser.on(&#x27;closearray&#x27;, onclosearray);
    }
  }

  parser.on(&#x27;openobject&#x27;, findfeed);
  parser.on(&#x27;key&#x27;, findfeed);

  var stack = [];
  var currObj = {};
  var currKey = &#x27;feed&#x27;;
  var inArray;

  function onvalue(value) {
    currObj[currKey] = value;
    if (stack.length === 1) {
      parser.emit(currKey, value);
      if (!buffer) { delete currObj[currKey]; }
    }
    if (inArray) {
      currKey++;
    }
  }

  function onopenobject(key) {
    var obj = currObj[currKey] = {};
    stack.push({
      obj: currObj,
      key: currKey,
      arr: inArray,
    });
    currObj = obj;
    currKey = key;
    inArray = false;
  }

  function onkey(key) {
    currKey = key;
  }

  function oncloseobject() {
    var parent = stack.pop();
    if (!parent) { return; }
    currObj = parent.obj;
    currKey = parent.key;
    inArray = parent.arr;

    // Clean object.
    currObj[currKey] = cleanObject(currObj[currKey]);

    // Emit key in feed if curr is parent.
    if (stack.length === 1) {
      parser.emit(currKey, currObj[currKey]);
      if (!buffer) { delete currObj[currKey]; }

    // Or parent is array.
    } else if (inArray) {
      if (stack.length === 2) {
        var event = stack[1].key === &#x27;entry&#x27; ? &#x27;item&#x27; : stack[1].key;
        parser.emit(event, currObj[currKey]);
        if (!buffer) { currObj.splice(currKey, 1); }
      }

      if (stack.length &#x3e; 2 || buffer) { currKey++; }
    }
  }

  function onopenarray() {
    var obj = currObj[currKey] = [];
    stack.push({
      obj: currObj,
      key: currKey,
      arr: inArray,
    });
    currObj = obj;
    currKey = 0;
    inArray = true;
  }

  function onclosearray() {
    var parent = stack.pop();
    currObj = parent.obj;
    currKey = parent.key;
    inArray = parent.arr;

    if (stack.length === 1) {
      if (!buffer) { delete currObj[currKey]; }
    } else if (inArray) {
      currKey++;
    }
  }

  parser.done = function() {
    if (!buffer) { return; }
    var root = currObj[currKey];
    root.type = &#x27;json&#x27;;
    root.items = root.entry;
    delete root.entry;
    return root;
  };

  return parser;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.feedme.toString" id="apidoc.element.feedme.toString">
        function <span class="apidocSignatureSpan">feedme.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
    return text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.feedme.xmlfeedparser" id="apidoc.element.feedme.xmlfeedparser">
        function <span class="apidocSignatureSpan">feedme.</span>xmlfeedparser
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">xmlfeedparser = function (buffer) {
  var parser = sax.createStream(false, { lowercasetags: true });

  var stack = [];
  var obj = {};

  // First start listening for the root tag.
  var openf1 = function(node) {
    var type;
    if (node.name === &#x27;channel&#x27; || node.name === &#x27;feed&#x27;) {
      if (node.name === &#x27;feed&#x27;) {
        type = &#x27;atom&#x27;;
        obj.type = type;
        this.emit(&#x27;type&#x27;, type);
      }
      parser.removeListener(&#x27;opentag&#x27;, openf1);
      parser.on(&#x27;text&#x27;, ontext);
      parser.on(&#x27;cdata&#x27;, ontext);
      parser.on(&#x27;opentag&#x27;, onopentag);
      parser.on(&#x27;closetag&#x27;, onclosetag);

    } else if (node.name === &#x27;rss&#x27;) {
      type = &#x27;rss &#x27; + node.attributes.version;
      obj.type = type;
      this.emit(&#x27;type&#x27;, type);
    } else {
      parser.emit(&#x27;error&#x27;, new Error(&#x27;Feed type not recognized&#x27;));
      parser.close();
    }
  };
  parser.on(&#x27;opentag&#x27;, openf1);

  function ontext(text) {
    // Make sure text events are text and not just whitespace.
    var rs = /\n(( {3})+|( {2})+|( {4})+|(\t)+)$/m.exec(text);
    if (rs !== null &#x26;&#x26; rs.index === 0 &#x26;&#x26; rs[0] === rs.input) { return; }
    if (obj.text == null) { obj.text = &#x27;&#x27;; }
    obj.text += text;
  }

  // After the root is found, start storing the rest of the document.
  function onopentag(node) {
    var key = node.name;
    var i;

    if (obj[key]) {
      if (!Array.isArray(obj[key])) {
        obj[key] = [obj[key], node.attributes];
        i = 1;
      } else {
        i = obj[key].push(node.attributes) - 1;
      }

    } else {
      obj[key] = node.attributes;
    }

    stack.push({ obj: obj, key: key, i: i });
    obj = i ? obj[key][i] : obj[key];
  }

  function onclosetag() {
    var parent = stack.pop();
    if (!parent) { return; }

    obj = parent.obj;
    var key = parent.key;
    var data = parent.i ?
      obj[key][parent.i] = cleanObj(obj[key][parent.i]) :
      obj[key] = cleanObj(obj[key]);

    if (!stack.length) {
      key = key === &#x27;entry&#x27; || key === &#x27;items&#x27; ? &#x27;item&#x27; : key;
      parser.emit(key, data);
      if (!buffer) { delete obj[key]; }
    }
  }

  // Called when done parsing the document.
  // Returns entire document in object form.
  parser.done = function() {
    if (!buffer) { return; }
    var items;
    if (obj.item != null) {
      items = obj.item;
      delete obj.item;
    } else if (obj.entry != null) {
      items = obj.entry;
      delete obj.entry;
    } else {
      items = [];
    }
    if (!Array.isArray(items)){
      items = [items];
    }
    obj.items = items;
    delete obj.text;
    return obj;
  };

  return parser;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.feedme.jsonfeedparser" id="apidoc.module.feedme.jsonfeedparser">module feedme.jsonfeedparser</a></h1>


    <h2>
        <a href="#apidoc.element.feedme.jsonfeedparser.jsonfeedparser" id="apidoc.element.feedme.jsonfeedparser.jsonfeedparser">
        function <span class="apidocSignatureSpan">feedme.</span>jsonfeedparser
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">jsonfeedparser = function (buffer) {
  var parser = clarinet.createStream();

  // First find the feed object.
  function findfeed(key) {
    if (key === &#x27;feed&#x27;) {
      parser.removeListener(&#x27;openobject&#x27;, findfeed);
      parser.removeListener(&#x27;key&#x27;, findfeed);
      parser.on(&#x27;value&#x27;, onvalue);
      parser.on(&#x27;openobject&#x27;, onopenobject);
      parser.on(&#x27;key&#x27;, onkey);
      parser.on(&#x27;closeobject&#x27;, oncloseobject);
      parser.on(&#x27;openarray&#x27;, onopenarray);
      parser.on(&#x27;closearray&#x27;, onclosearray);
    }
  }

  parser.on(&#x27;openobject&#x27;, findfeed);
  parser.on(&#x27;key&#x27;, findfeed);

  var stack = [];
  var currObj = {};
  var currKey = &#x27;feed&#x27;;
  var inArray;

  function onvalue(value) {
    currObj[currKey] = value;
    if (stack.length === 1) {
      parser.emit(currKey, value);
      if (!buffer) { delete currObj[currKey]; }
    }
    if (inArray) {
      currKey++;
    }
  }

  function onopenobject(key) {
    var obj = currObj[currKey] = {};
    stack.push({
      obj: currObj,
      key: currKey,
      arr: inArray,
    });
    currObj = obj;
    currKey = key;
    inArray = false;
  }

  function onkey(key) {
    currKey = key;
  }

  function oncloseobject() {
    var parent = stack.pop();
    if (!parent) { return; }
    currObj = parent.obj;
    currKey = parent.key;
    inArray = parent.arr;

    // Clean object.
    currObj[currKey] = cleanObject(currObj[currKey]);

    // Emit key in feed if curr is parent.
    if (stack.length === 1) {
      parser.emit(currKey, currObj[currKey]);
      if (!buffer) { delete currObj[currKey]; }

    // Or parent is array.
    } else if (inArray) {
      if (stack.length === 2) {
        var event = stack[1].key === &#x27;entry&#x27; ? &#x27;item&#x27; : stack[1].key;
        parser.emit(event, currObj[currKey]);
        if (!buffer) { currObj.splice(currKey, 1); }
      }

      if (stack.length &#x3e; 2 || buffer) { currKey++; }
    }
  }

  function onopenarray() {
    var obj = currObj[currKey] = [];
    stack.push({
      obj: currObj,
      key: currKey,
      arr: inArray,
    });
    currObj = obj;
    currKey = 0;
    inArray = true;
  }

  function onclosearray() {
    var parent = stack.pop();
    currObj = parent.obj;
    currKey = parent.key;
    inArray = parent.arr;

    if (stack.length === 1) {
      if (!buffer) { delete currObj[currKey]; }
    } else if (inArray) {
      currKey++;
    }
  }

  parser.done = function() {
    if (!buffer) { return; }
    var root = currObj[currKey];
    root.type = &#x27;json&#x27;;
    root.items = root.entry;
    delete root.entry;
    return root;
  };

  return parser;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.feedme.toString" id="apidoc.module.feedme.toString">module feedme.toString</a></h1>


    <h2>
        <a href="#apidoc.element.feedme.toString.toString" id="apidoc.element.feedme.toString.toString">
        function <span class="apidocSignatureSpan">feedme.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toString() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.feedme.xmlfeedparser" id="apidoc.module.feedme.xmlfeedparser">module feedme.xmlfeedparser</a></h1>


    <h2>
        <a href="#apidoc.element.feedme.xmlfeedparser.xmlfeedparser" id="apidoc.element.feedme.xmlfeedparser.xmlfeedparser">
        function <span class="apidocSignatureSpan">feedme.</span>xmlfeedparser
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">xmlfeedparser = function (buffer) {
  var parser = sax.createStream(false, { lowercasetags: true });

  var stack = [];
  var obj = {};

  // First start listening for the root tag.
  var openf1 = function(node) {
    var type;
    if (node.name === &#x27;channel&#x27; || node.name === &#x27;feed&#x27;) {
      if (node.name === &#x27;feed&#x27;) {
        type = &#x27;atom&#x27;;
        obj.type = type;
        this.emit(&#x27;type&#x27;, type);
      }
      parser.removeListener(&#x27;opentag&#x27;, openf1);
      parser.on(&#x27;text&#x27;, ontext);
      parser.on(&#x27;cdata&#x27;, ontext);
      parser.on(&#x27;opentag&#x27;, onopentag);
      parser.on(&#x27;closetag&#x27;, onclosetag);

    } else if (node.name === &#x27;rss&#x27;) {
      type = &#x27;rss &#x27; + node.attributes.version;
      obj.type = type;
      this.emit(&#x27;type&#x27;, type);
    } else {
      parser.emit(&#x27;error&#x27;, new Error(&#x27;Feed type not recognized&#x27;));
      parser.close();
    }
  };
  parser.on(&#x27;opentag&#x27;, openf1);

  function ontext(text) {
    // Make sure text events are text and not just whitespace.
    var rs = /\n(( {3})+|( {2})+|( {4})+|(\t)+)$/m.exec(text);
    if (rs !== null &#x26;&#x26; rs.index === 0 &#x26;&#x26; rs[0] === rs.input) { return; }
    if (obj.text == null) { obj.text = &#x27;&#x27;; }
    obj.text += text;
  }

  // After the root is found, start storing the rest of the document.
  function onopentag(node) {
    var key = node.name;
    var i;

    if (obj[key]) {
      if (!Array.isArray(obj[key])) {
        obj[key] = [obj[key], node.attributes];
        i = 1;
      } else {
        i = obj[key].push(node.attributes) - 1;
      }

    } else {
      obj[key] = node.attributes;
    }

    stack.push({ obj: obj, key: key, i: i });
    obj = i ? obj[key][i] : obj[key];
  }

  function onclosetag() {
    var parent = stack.pop();
    if (!parent) { return; }

    obj = parent.obj;
    var key = parent.key;
    var data = parent.i ?
      obj[key][parent.i] = cleanObj(obj[key][parent.i]) :
      obj[key] = cleanObj(obj[key]);

    if (!stack.length) {
      key = key === &#x27;entry&#x27; || key === &#x27;items&#x27; ? &#x27;item&#x27; : key;
      parser.emit(key, data);
      if (!buffer) { delete obj[key]; }
    }
  }

  // Called when done parsing the document.
  // Returns entire document in object form.
  parser.done = function() {
    if (!buffer) { return; }
    var items;
    if (obj.item != null) {
      items = obj.item;
      delete obj.item;
    } else if (obj.entry != null) {
      items = obj.entry;
      delete obj.entry;
    } else {
      items = [];
    }
    if (!Array.isArray(items)){
      items = [items];
    }
    obj.items = items;
    delete obj.text;
    return obj;
  };

  return parser;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
